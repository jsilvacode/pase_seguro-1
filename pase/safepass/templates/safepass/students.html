{% extends 'core/base.html' %}
{% load static %}
{% block title %}Formulario estudiantes{% endblock %} 

{% block content %}
<div id="wrapper">
    <div class="d-flex flex-column" id="content-wrapper" style="min-height: 100%;">
        <div id="content">
            <div class="container-fluid" style="padding-top: 30px;">
                <h3 class="text-dark mb-4">Solicitud de acceso al campus</h3>
                <form class="p-0 m-0" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-row mb-3">
                        <div class="col">
                            <div class="form-row">
                                <div class="col-12 col-lg-6">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 font-weight-bold">Información del Estudiante</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="form-row mb-3">
                                                    <div class="col">
                                                        <label for="name" style="width: 100%;"><strong>Nombres</strong></label>
                                                        <input value="{{ consumer_identifier.name }}" class="form-control form-control form-control-user" type="text" style="width: 100%;" readonly="" name="name">
                                                    </div>
                                                </div>
                                                <div class="form-row mb-3">
                                                    <div class="col">
                                                        <label for="last_name" style="width: 100%;"><strong>Apellidos</strong></label>
                                                        <input value="{{ consumer_identifier.last_name }}" class="form-control form-control form-control-user" type="text" style="width: 100%;" name="last_name" readonly="">
                                                    </div>
                                                </div>
                                                <div class="form-row mb-3">
                                                    <div class="col">
                                                        <label for="username" style="width: 100%;"><strong>RUT</strong></label>
                                                        <input value="{{ consumer_identifier.rut }}" class="form-control form-control form-control-user" type="text" style="width: 100%;" name="rut" readonly="">
                                                    </div>
                                                </div>
                                                <div class="form-row mb-3">
                                                    <div class="col-sm-12 col-md-6">
                                                        <label for="email" style="width: 100%;"><strong>Correo</strong><br></label>
                                                        <input {% if consumer_identifier.email %}value="{{ consumer_identifier.email }}"{% endif %} class="form-control form-control form-control-user" type="email" name="email" readonly="">
                                                    </div>
                                                    <div class="col">
                                                        <label for="telephone" style="width: 100%;"><strong>Teléfono</strong><br></label><input {% if consumer_identifier.telephone %}value="{{ consumer_identifier.telephone }}"{% endif %} class="form-control form-control form-control-user" type="text" style="width: 100%;" readonly="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 font-weight-bold">Antecedentes Académicos</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="form-row mb-3">
                                                    <div class="col">
                                                        <label for="name" style="width: 100%;"><strong>Facultad</strong></label>
                                                        <input value="{{ consumer_identifier.name }}" class="form-control form-control form-control-user" type="text" style="width: 100%;" readonly="" name="name">
                                                    </div>
                                                </div>
                                                <div class="form-row mb-3">
                                                    <div class="col">
                                                        <label for="last_name" style="width: 100%;"><strong>Carrera</strong></label>
                                                        <input value="{{ consumer_identifier.last_name }}" class="form-control form-control form-control-user" type="text" style="width: 100%;" name="last_name" readonly="">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 font-weight-bold">Eventos</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="form-row mb-3">
                                                    <div class="col-sm-12 col-md-6">
                                                        <label for="faculty" style="width: 100%;"><strong>Facultad</strong><br></label>
                                                        <input value="{% if consumer_identifier.career.faculty %}{{ consumer_identifier.career.faculty.name }}{% endif %}" class="form-control form-control form-control-user" type="text" style="width: 100%;" readonly="" name="faculty">
                                                    </div>
                                                    <div class="col">
                                                        <label for="career" style="width: 100%;"><strong>Carrera</strong><br></label>
                                                        <input {% if consumer_identifier.career %}value="{{ consumer_identifier.career.name }}"{% endif %} class="form-control form-control form-control-user" type="text" style="width: 100%;" readonly="" name="career">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="container-fluid">
                                                <div class="form-row mb-3">
                                                    <div class="col-sm-12">
                                                        <label class="col-form-label" for="signature"><strong>Observaciones&nbsp;/ Comentarios</strong><br></label>
                                                    </div>
                                                    <div class="col">
                                                        <textarea class="form-control" rows="7" style="width: 100%;" name="comments">{% if form.comments.value %}{{ form.comments.value }}{% endif %}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-12">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 font-weight-bold">Antecedentes de Salud</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="form-row">
                                                    <div class="col-12 col-lg-6">
                                                        <div class="form-row mb-5">
                                                            <div class="col-9">
                                                                <label class="col-form-label" style="width: 100%;" for="contact_has_been_made">¿HA SIDO CONTACTO ESTRECHO DE UNA PERSONA ENFERMA O SOSPECHOSA DE CORONAVIRUS (COVID-19), LOS ÚLTIMOS 14 DÍAS?<br></label>
                                                            </div>
                                                            <div class="col">
                                                                {% for key, human in fake_object.CONTACT_HAS_BEEN_MADE_CHOICES %}
                                                                    <div class="form-check">        
                                                                        <input class="form-check-input" type="radio" id="formRadio-contact-{{ key }}" name="contact_has_been_made" value="{{ key }}" {% if key|slugify == form.contact_has_been_made.value|slugify %} checked {% endif %} required="">
                                                                        <label class="form-check-label" for="formRadio-contact-{{ key }}">{{ human }}</label>
                                                                    </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                        <div class="form-row mb-3">
                                                            <div class="col-sm-12 col-md-6" style="margin-bottom: 16px;">
                                                                <label style="width: 100%;"><strong>¿Ha presentado alguno de estos síntomas cardinales?</strong></label>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-14" name="symptom_fever" {% if form.symptom_fever.value%}checked{% endif %}><label class="form-check-label" for="formCheck-14">Tos</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-15" name="symptom_loss_of_smell" {% if form.symptom_loss_of_smell.value%}checked{% endif %}><label class="form-check-label" for="formCheck-15">Disnea o dificultad respiratoria</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-16" name="symptom_loss_of_taste" {% if form.symptom_loss_of_taste.value%}checked{% endif %}><label class="form-check-label" for="formCheck-16">Congestión nasal</label></div>
                                                            </div>
                                                            <div class="col">
                                                                <label style="width: 100%;"><strong>¿Ha presentado alguno de estos síntomas no cardinales?</strong></label>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-2" name="symptom_cough" {% if form.symptom_cough.value%}checked{% endif %}><label class="form-check-label" for="formCheck-2">Tos</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-3" name="symptom_respiratory_distress" {% if form.symptom_respiratory_distress.value%}checked{% endif %}><label class="form-check-label" for="formCheck-3">Disnea o dificultad respiratoria</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-4" name="symptom_nasal_secretions" {% if form.symptom_nasal_secretions.value%}checked{% endif %}><label class="form-check-label" for="formCheck-4">Congestión nasal</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-5" name="symptom_increased_respiratory_rate" {% if form.symptom_increased_respiratory_rate.value%}checked{% endif %}><label class="form-check-label" for="formCheck-5">Aumento de la frecuencia respiratoria</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-6" name="symptom_sore_throat" {% if form.symptom_sore_throat.value%}checked{% endif %}><label class="form-check-label" for="formCheck-6">Dolor de garganta</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-7" name="symptom_muscle_pain" {% if form.symptom_muscle_pain.value%}checked{% endif %}><label class="form-check-label" for="formCheck-7">Dolor muscular</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-8" name="symptom_fatigue" {% if form.symptom_fatigue.value%}checked{% endif %}><label class="form-check-label" for="formCheck-8">Fatiga</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-9" name="symptom_chest_pain" {% if form.symptom_chest_pain.value%}checked{% endif %}><label class="form-check-label" for="formCheck-9">Escalofríos</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-10" name="symptom_shaking_chills" {% if form.symptom_shaking_chills.value%}checked{% endif %}><label class="form-check-label" for="formCheck-10">Dolor torácico</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-11" name="symptom_headache" {% if form.symptom_headache.value%}checked{% endif %}><label class="form-check-label" for="formCheck-11">Dolor de cabeza</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-12" name="symptom_diarrhea" {% if form.symptom_diarrhea.value%}checked{% endif %}><label class="form-check-label" for="formCheck-12">Diarrea</label></div>
                                                                <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-13" name="symptom_nausea_vomiting" {% if form.symptom_nausea_vomiting.value%}checked{% endif %}><label class="form-check-label" for="formCheck-13">Náuseas/vómito</label></div>  
                                                            </div>
                                                            <div class="col-12">
                                                                <div class="d-flex flex-column flex-lg-row" style="margin-top: 16px;">
                                                                    <span class="text-nowrap d-flex flex-fill align-items-xl-center" style="margin-right: 10px;">Otros síntomas<br></span>
                                                                    <input class="form-control d-flex align-self-center form-control form-control-user" type="text" name="symptom_other" {% if form.symptom_other.value %}value="{{ form.symptom_other.value }}"{% endif %}>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-lg-6 mt-5 mt-lg-0">
                                                        <div class="form-row mb-3">
                                                            <div class="col-sm-12">     
                                                                <label for="autoimmune_disease" style="width: 100%;">¿Padece alguna enfermedad autoinmune? ¿Cuál?<br></label>
                                                                <input class="form-control form-control form-control-user" type="text" style="width: 100%;" name="autoimmune_disease" {% if form.autoimmune_disease.value %}value="{{ form.autoimmune_disease.value }}"{% endif %}>
                                                            </div>
                                                        </div>
                                                        <div class="form-row mb-3">
                                                            <div class="col-sm-12">
                                                                <label for="chronic_disease" style="width: 100%;">¿Padece alguna enfermedad crónica?&nbsp;¿Cuál?<br></label>
                                                                <input class="form-control form-control form-control-user" type="text" style="width: 100%;" name="chronic_disease" {% if form.chronic_disease.value %}value="{{ form.chronic_disease.value }}"{% endif %}>
                                                            </div>
                                                        </div>
                                                        <div class="form-row mb-3">
                                                            <div class="col-sm-12">
                                                                <label for="is_pregnant" style="width: 100%;">Si es mujer, ¿Está embarazada?<br></label>
                                                                {% for key, human in fake_object.IS_PREGNANT_CHOICES %}
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio" id="formRadio-pregnancy-{{ key }}" value="{{ key }}" name="is_pregnant" {% if key|slugify == form.is_pregnant.value|slugify %} checked {% endif %}>
                                                                        <label class="form-check-label" for="formRadio-pregnancy-{{ key }}">{{ human }}</label>
                                                                    </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% if form.errors %}
                                {% for field in form %}
                                    {% for error in field.errors %}
                                        <div class="alert alert-danger">
                                            <strong>{{ field.label }}: {{ error|escape }}</strong>
                                        </div>
                                    {% endfor %}
                                {% endfor %}
                                {% for error in form.non_field_errors %}
                                    <div class="alert alert-danger">
                                        <strong>{{ error|escape }}</strong>
                                    </div>
                                {% endfor %}
                            {% endif %}

                            <div class="form-row">
                                <div class="col">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 font-weight-bold">Declaración Personal de Salud Idónea</p>
                                        </div>
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="form-row mb-3">
                                                    <div class="col-12">
                                                        <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-1" name="confirm_declaration" required="">
                                                            <label class="form-check-label" for="formCheck-1">
                                                                <em>DECLARO QUE NO SOY UN CASO ACTIVO CONFIRMADO DE COVID-19, TAMPOCO CALIFICO COMO CASO SOSPECHOSO NI PROBABLE, DE ACUERDO A LO ESTABLECIDO EN LA NORMA SANITARIA, 
                                                                    COMO LO REFIERE EL TÍTULO VI, Nº3, LETRAS a), b), c) y d) DE ESTE PROTOCOLO, POR LO QUE ESTOY EN CONDICIONES DE SALUD ÓPTIMAS Y ADECUADAS PARA INGRESAR A LAS ACTIVIDADES DE PRÁCTICA PROFESIONAL Y/O ACTIVIDADES CURRICULARES PRESENCIALES EN EL CAMPUS, 
                                                                    SIN REPRESENTAR UN RIESGO PARA OTROS. DECLARO QUE MIS ANTECEDENTES ACTUALES DE SALUD SON LOS DECLARADOS ANTERIORMENTE</em>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row mb-3">
                                                    <div class="col-12">
                                                        {% if settings %}<a target="_blank" href="{{ settings.statement_file_url }}">Plantilla de documento</a><br>{% endif %}
                                                        {% if consumer_identifier.statement_of_responsibilities %}
                                                            <a target="_blank" href="{{ MEDIA_URL }}{{ consumer_identifier.statement_of_responsibilities.url }}">{{ MEDIA_URL }}{{ consumer_identifier.statement_of_responsibilities.name }}</a>
                                                            <br>
                                                        {% endif %}
                                                        <input type="file" name="statement_of_responsibilities" {% if not consumer_identifier.statement_of_responsibilities %}required=""{% endif %} id="id_statement_of_responsibilities">
                                                    </div>
                                                </div>
                                                <div class="form-row text-right mb-3">
                                                    <div class="col"><button class="btn btn-primary text-white btn-user" type="submit">Enviar</button></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <footer class="sticky-footer">
            <div class="container my-auto">
                <div class="text-center my-auto copyright"><span>Copyright © UnACh 2021</span></div>
            </div>
        </footer>
    </div>
</div>
{% endblock %}